increase_colonial_autonomy = {
	category = influence

	require_acceptance = no
	
	is_visible = {
		num_of_colonists = 1
		OR = {
			AND = {
				FROM = { is_subject_of_type = colony }
				can_create_subject_type = {
					subject = FROM
					subject_type = dominion
				}
			}
			AND = {
				FROM = { is_subject_of_type = dominion }
				can_create_subject_type = {
					subject = FROM
					subject_type = autonomous_dominion
				}
			}
		}
	}
	
	is_allowed = {
		hidden_trigger = {
		num_of_colonists = 1
			OR = {
				AND = {
					FROM = { is_subject_of_type = colony }
					can_create_subject_type = {
						subject = FROM
						subject_type = dominion
					}
				}
				AND = {
					FROM = { is_subject_of_type = dominion }
					can_create_subject_type = {
						subject = FROM
						subject_type = autonomous_dominion
					}
				}
			}
		}
		FROM = {
			capital_scope = { trade_range = ROOT }
		}
		is_at_war = no
		FROM = { is_at_war = no }
		FROM = {
			liberty_desire = 50
		}
	}
	
	on_accept = {
		if = {
			limit = {
				num_of_colonists = 1
				OR = {
					AND = {
						FROM = { is_subject_of_type = colony }
						can_create_subject_type = {
							subject = FROM
							subject_type = dominion
						}
					}
					AND = {
						FROM = { is_subject_of_type = dominion }
						can_create_subject_type = {
							subject = FROM
							subject_type = autonomous_dominion
						}
					}
				}
				FROM = {
					capital_scope = { trade_range = ROOT }
				}
				is_at_war = no
				FROM = { is_at_war = no }
				FROM = {
					liberty_desire = 50
				}
			}
			if = {
				limit = {
					FROM = { is_subject_of_type = colony }
				}
				create_subject = {
					subject = FROM
					subject_type = dominion
				}
			}
			else = {
				create_subject = {
					subject = FROM
					subject_type = autonomous_dominion
				}
			}
			FROM = {
				country_event = { id = subjects_expanded_dominion_events.1 }
			}
			add_country_modifier = {
				name = established_autonomous_dominion
				duration = 3650
				hidden = yes
			}
		}
	}
	
	ai_will_do = {
		FROM = {
			is_subject_of_type = colony
		}
		OR = {
			AND = {
				is_random_new_world = no
				tag = GBR
				FROM = {
					capital_scope = {
						colonial_region = colonial_canada
					}
				}
			}
			AND = {
				colony = 3
				NOT = { calc_true_if = { all_subject_country = { is_subject_of_type = autonomous_dominion } amount = 2 } }
				FROM = {
					OR = {
						development_of_overlord_fraction = 0.33
						liberty_desire = 90
					}
				}
				NOT = { has_country_modifier = established_autonomous_dominion }
				OR = {
					tag = GBR
					tag = ENG
					tag = FRA
					tag = FR2
					tag = SPA
					tag = CAS
				}
				# FROM is not best paying colony of ROOT (if liberty_desire is smaller than 50)
				any_subject_country = {
					is_colonial_nation = yes
					NOT = { is_subject_of_type = autonomous_dominion }
					NOT = { tag = FROM }
					variable_arithmetic_trigger = {
						custom_tooltip = FROM_TARIFF_VALUE
						# Export Overlord's Global Tariffs
						export_to_variable = {
							which = overlord_global_tariffs
							value = modifier:global_tariffs
							who = ROOT
						}
						# Export FROM's Monthly Income
						export_to_variable = {
							which = FROM_cn_tariff_value
							value = trigger_value:monthly_income
							who = FROM
						}
						# Export FROM's Tariff Percentage
						export_to_variable = {
							which = FROM_cn_tariff_percentage
							value = trigger_value:tariff_value
							who = FROM
						}
						# Calculate Tariff Efficiency
						variable_arithmetic_trigger = {
							change_variable = { which = overlord_global_tariffs value = 1 }
						}
						multiply_variable = { which = FROM_cn_tariff_percentage which = overlord_global_tariffs }
						# Calculate Payed Money
						multiply_variable = { which = FROM_cn_tariff_value which = FROM_cn_tariff_percentage }
						divide_variable = { which = FROM_cn_tariff_value value = 10 }
						multiply_variable = { which = FROM_cn_tariff_value value = 10 }
						
						# Compare to other Colonies
						export_to_variable = {
							which = cn_tariff_value
							value = trigger_value:monthly_income
						}
						export_to_variable = {
							which = cn_tariff_percentage
							value = trigger_value:tariff_value
						}
						multiply_variable = { which = cn_tariff_percentage which = overlord_global_tariffs }
						multiply_variable = { which = cn_tariff_value which = cn_tariff_percentage }
						divide_variable = { which = cn_tariff_value value = 10 }
						multiply_variable = { which = cn_tariff_value value = 10 }									
						
						check_variable = { which = cn_tariff_value which = FROM_cn_tariff_value }
					}
				}
			}
		}
		NOT = { has_age_ability = ab_industrial_british_empire }
	}
}

demand_manpower_from_autonomous_dominion = {
	category = influence

	require_acceptance = no
	
	is_visible = {
		FROM = {
			is_subject_of = ROOT
			is_subject_of_type = autonomous_dominion
		}
	}
	
	is_allowed = {
		hidden_trigger = {
			FROM = {
				is_subject_of = ROOT
				is_subject_of_type = autonomous_dominion
			}
		}
		is_at_war = yes
		FROM = { is_at_war = no }
		FROM = {
			manpower = 5
		}
		FROM = {
			NOT = { liberty_desire = 50 }
		}
		FROM = {
			custom_trigger_tooltip = {
				tooltip = DID_NOT_DEMAND_MANPOWER_OF_AUTONOMOUS_DOMINION_WITHIN_LAST_5_YEARS
				NOT = { has_country_modifier = cooldown_demand_manpower_from_autonomous_dominion }
			}
		}
	}
	
	on_accept = {
		if = {
			limit = {
				FROM = {
					is_subject_of = ROOT
					is_subject_of_type = autonomous_dominion
				}
				is_at_war = yes
				FROM = { is_at_war = no }
				FROM = {
					manpower = 5
				}
				FROM = {
					NOT = { liberty_desire = 50 }
				}
			}
			add_manpower = 5
			FROM = {
				add_manpower = -5
				add_liberty_desire = 10
				country_event = { id = subjects_expanded_dominion_events.2 }
				add_country_modifier = {
					name = cooldown_demand_manpower_from_autonomous_dominion
					duration = 1825
					hidden = yes
				}
			}
		}
	}
	
	ai_will_do = {
		NOT = { manpower = 1 }
		FROM = {
			manpower = 5
			NOT = { liberty_desire = 40 }
		}
	}
}

decrease_colonial_autonomy = {
	category = influence

	require_acceptance = no
	
	is_visible = {
		num_of_colonists = 1
		FROM = {
			is_subject_of = ROOT
			OR = {
				AND = {
					is_subject_of_type = dominion
					capital_scope = {
						is_node_in_trade_company_region = no
					}
				}
				is_subject_of_type = autonomous_dominion
			}
		}
	}
	
	is_allowed = {
		hidden_trigger = {
			num_of_colonists = 1
			FROM = {
				is_subject_of = ROOT
				OR = {
					AND = {
						is_subject_of_type = dominion
						capital_scope = {
							is_node_in_trade_company_region = no
						}
					}
					is_subject_of_type = autonomous_dominion
				}
			}
		}
		FROM = {
			capital_scope = { trade_range = ROOT }
		}
		is_at_war = no
		FROM = { is_at_war = no }
		FROM = {
			NOT = { liberty_desire = 50 }
		}
	}
	
	on_accept = {
		if = {
			limit = {
				num_of_colonists = 1
				FROM = {
					is_subject_of = ROOT
					OR = {
						AND = {
							is_subject_of_type = dominion
							capital_scope = {
								is_node_in_trade_company_region = no
							}
						}
						is_subject_of_type = autonomous_dominion
					}
				}
				FROM = {
					capital_scope = { trade_range = ROOT }
				}
				is_at_war = no
				FROM = { is_at_war = no }
				FROM = {
					NOT = { liberty_desire = 50 }
				}
			}
			if = {
				limit = {
					FROM = { is_subject_of_type = autonomous_dominion }
				}
				create_subject = {
					subject = FROM
					subject_type = dominion
				}
			}
			else = {
				create_subject = {
					subject = FROM
					subject_type = colony
				}
			}
			FROM = {
				add_liberty_desire = 25
			}
		}
	}
	
	ai_will_do = {
		always = no
	}
}

seize_provinces_in_other_colonial_regions = {
	category = influence

	require_acceptance = no
	
	is_visible = {
		ai = no
		num_of_colonists = 1
		FROM = {
			is_subject_of = ROOT
			OR = {
				is_subject_of_type = colony
				is_subject_of_type = dominion
			}
			any_owned_province = {
				NOT = { colonial_region = CAPITAL }
			}
		}
	}
	
	is_allowed = {
		hidden_trigger = {
			ai = no
			num_of_colonists = 1
			FROM = {
				is_subject_of = ROOT
				OR = {
					is_subject_of_type = colony
					is_subject_of_type = dominion
				}
				any_owned_province = {
					NOT = { colonial_region = CAPITAL }
				}
			}
		}
		is_at_war = no
		FROM = { is_at_war = no }
		FROM = {
			NOT = { liberty_desire = 50 }
		}
		FROM = {
			OR = {
				num_of_owned_provinces_with = {
					value = 5
					custom_trigger_tooltip = {
						tooltip = IS_NOT_IN_THE_CAPITAL_COLONIAL_REGION
						NOT = { colonial_region = CAPITAL }
					}
					custom_trigger_tooltip = {
						tooltip = HAS_NO_OTHER_COLONIAL_NATION_IN_SAME_REGION
						NOT = {
							any_province = {
								colonial_region = PREV
								colonial_region = CAPITAL
								owner = {
									NOT = { tag = FROM }
									is_subject_of = ROOT
									OR = {
										is_subject_of_type = colony
										is_subject_of_type = dominion
										is_subject_of_type = autonomous_dominion
									}
								}
							}
						}
					}
				}
				any_owned_province = {
					custom_trigger_tooltip = {
						tooltip = IS_NOT_IN_THE_CAPITAL_COLONIAL_REGION
						NOT = { colonial_region = CAPITAL }
					}
					custom_trigger_tooltip = {
						tooltip = HAS_OTHER_COLONIAL_NATION_IN_SAME_REGION
						any_province = {
							colonial_region = PREV
							colonial_region = CAPITAL
							owner = {
								NOT = { tag = FROM }
								is_subject_of = ROOT
								OR = {
									is_subject_of_type = colony
									is_subject_of_type = dominion
									is_subject_of_type = autonomous_dominion
								}
							}
						}
					}
				}
			}
		}
	}
	
	on_accept = {
		if = {
			limit = {
				num_of_colonists = 1
				FROM = {
					is_subject_of = ROOT
					OR = {
						is_subject_of_type = colony
						is_subject_of_type = dominion
					}
					any_owned_province = {
						NOT = { colonial_region = CAPITAL }
					}
				}
				is_at_war = no
				FROM = { is_at_war = no }
				FROM = {
					NOT = { liberty_desire = 50 }
				}
				FROM = {
					OR = {
						num_of_owned_provinces_with = {
							value = 5
							NOT = { colonial_region = CAPITAL }
							NOT = {
								any_province = {
									colonial_region = PREV
									colonial_region = CAPITAL
									owner = {
										NOT = { tag = FROM }
										is_subject_of = ROOT
										OR = {
											is_subject_of_type = colony
											is_subject_of_type = dominion
											is_subject_of_type = autonomous_dominion
										}
									}
								}
							}
						}
						any_owned_province = {
							NOT = { colonial_region = CAPITAL }
							any_province = {
								colonial_region = PREV
								colonial_region = CAPITAL
								owner = {
									NOT = { tag = FROM }
									is_subject_of = ROOT
									OR = {
										is_subject_of_type = colony
										is_subject_of_type = dominion
										is_subject_of_type = autonomous_dominion
									}
								}
							}
						}
					}
				}
			}
			FROM = {
				add_liberty_desire = 15
				every_owned_province = {
					limit = {
						OR = {
							AND = {
								NOT = { colonial_region = CAPITAL }
								NOT = {
									any_province = {
										colonial_region = PREV
										colonial_region = CAPITAL
										owner = {
											NOT = { tag = FROM }
											is_subject_of = ROOT
											OR = {
												is_subject_of_type = colony
												is_subject_of_type = dominion
												is_subject_of_type = autonomous_dominion
											}
										}
									}
								}
								calc_true_if = {
									all_province = {
										owned_by = FROM
										colonial_region = PREV
										NOT = { province_id = PREV }
										NOT = { colonial_region = CAPITAL }
										NOT = {
											any_province = {
												colonial_region = PREV
												colonial_region = CAPITAL
												owner = {
													NOT = { tag = FROM }
													is_subject_of = ROOT
													OR = {
														is_subject_of_type = colony
														is_subject_of_type = dominion
														is_subject_of_type = autonomous_dominion
													}
												}
											}
										}
									}
									amount = 4
								}
							}
							AND = {
								NOT = { colonial_region = CAPITAL }
								any_province = {
									colonial_region = PREV
									colonial_region = CAPITAL
									owner = {
										NOT = { tag = FROM }
										is_subject_of = ROOT
										OR = {
											is_subject_of_type = colony
											is_subject_of_type = dominion
											is_subject_of_type = autonomous_dominion
										}
									}
								}
							}
						}
					}
					if = {
						limit = {
							is_core = PREV
						}
						remove_core = PREV
						add_core = ROOT
					}
					cede_province = ROOT
				}
			}
		}
	}
	
	ai_will_do = {
		always = no
	}
}