is_possible_subject_of_subject_type_vassal = {
	NOT = { is_subject_of_type = vassal }
	is_possible_vassal = yes
}

is_possible_subject_of_subject_type_march = {
	NOT = { is_subject_of_type = march }
	is_possible_march = yes
}

is_possible_subject_of_subject_type_daimyo_vassal = {
	NOT = { is_subject_of_type = daimyo_vassal }
}

is_possible_subject_of_subject_type_personal_union = {
	is_subject = no
}

is_possible_subject_of_subject_type_client_vassal = {
	NOT = { is_subject_of_type = client_vassal }
}

is_possible_subject_of_subject_type_client_march = {
	NOT = { is_subject_of_type = client_march }
}

is_possible_subject_of_subject_type_colony = {
	NOT = { is_subject_of_type = colony }
}

is_possible_subject_of_subject_type_tributary_state = {
	has_dlc = "Mandate of Heaven"
	NOT = { is_subject_of_type = tributary_state }
}

is_possible_subject_of_subject_type_protectorate = {
	# PREVs in THIS scope refer to possible overlord
	is_subject = no
	NOT = { technology_group = western }
	NOT = { technology_group = eastern }
	NOT = { technology_group = roman_group }
	NOT = { technology_group = muslim }
	PREV = {
		NOT = { same_continent = PREV }
	}
	is_nomad = no
	OR = {
		PREV = { institution_difference = { who = PREV value = 3 } }
		# THIS is at least 9 techs behind PREV
		variable_arithmetic_trigger = {
			export_to_variable = {
				which = our_adm_tech_level
				value = trigger_value:adm_tech
			}
			export_to_variable = {
				which = our_dip_tech_level
				value = trigger_value:dip_tech
			}
			export_to_variable = {
				which = our_mil_tech_level
				value = trigger_value:mil_tech
			}
			export_to_variable = {
				which = their_adm_tech_level
				value = trigger_value:adm_tech
				who = PREV
			}
			export_to_variable = {
				which = their_dip_tech_level
				value = trigger_value:dip_tech
				who = PREV
			}
			export_to_variable = {
				which = their_mil_tech_level
				value = trigger_value:mil_tech
				who = PREV
			}
			export_to_variable = {
				which = our_total_tech_level
				value = 0
			}
			export_to_variable = {
				which = their_total_tech_level
				value = 0
			}
			change_variable = { which = our_total_tech_level which = our_adm_tech_level }
			change_variable = { which = our_total_tech_level which = our_dip_tech_level }
			change_variable = { which = our_total_tech_level which = our_mil_tech_level }
			change_variable = { which = their_total_tech_level which = their_adm_tech_level }
			change_variable = { which = their_total_tech_level which = their_dip_tech_level }
			change_variable = { which = their_total_tech_level which = their_mil_tech_level }
			change_variable = { which = their_total_tech_level value = -9 }
			
			check_variable = { which = their_total_tech_level which = our_total_tech_level }
		}
	}
	# Capital in Trade Range of possible Overlord has to be checked additionally
}

is_possible_subject_of_subject_type_puppet_state = {
	# PREVs in THIS scope refer to possible overlord
	OR = {
		is_subject = no
		AND = {
			is_subject_of = PREV
			is_subject_of_type = client_vassal
		}
	}
	is_nomad = no
	is_tribal = no
	primitives = no
	is_great_power = no
	OR = {
		war_with = PREV
		is_subject_of = PREV
		has_opinion_modifier = {
			modifier = released_in_peace
			who = PREV
		}
	}
	OR = {
		is_year = 1700
		current_age = age_of_absolutism
		PREV = {
			has_casus_belli = { type = cb_imperial target = PREV }
		}
	}
	# Capital in Trade Range of possible Overlord has to be checked additionally
}

is_possible_subject_of_subject_type_dominion = {
	# PREVs in THIS scope refer to possible overlord
	NOT = { is_subject_of_type = dominion }
	is_subject_of = PREV
	OR = {
		is_subject_of_type = colony
		is_subject_of_type = autonomous_dominion
	}
	total_development = 100
	# Capital in Trade Range of possible Overlord has to be checked additionally
}

is_possible_subject_of_subject_type_autonomous_dominion = {
	# PREVs in THIS scope refer to possible overlord
	NOT = { is_subject_of_type = autonomous_dominion }
	is_subject_of = PREV
	is_subject_of_type = dominion
	total_development = 300
	# Capital in Trade Range of possible Overlord has to be checked additionally
}

is_possible_subject_of_subject_type_roman_client_kingdom = {
	NOT = { is_subject_of_type = roman_client_kingdom }
	OR = {
		government = monarchy
		war_with = PREV
	}
}

is_possible_subject_of_subject_type_voivodeship = {
	NOT = { is_subject_of_type = voivodeship }
	is_subject_of = PREV
	is_vassal_or_similar_subject = yes
	is_neighbor_of = PREV
}

is_possible_subject_of_subject_type_fief_subject = {
	NOT = { is_subject_of_type = fief_subject }
	OR = {
		is_subject = no
		AND = {
			is_subject_of = PREV
			is_vassal_or_similar_subject = yes
		}
	}
	primary_culture = PREV
}

is_possible_subject_of_subject_type_crusader_state_vassal = {
	NOT = { is_subject_of_type = crusader_state_vassal }
	is_subject_of = PREV
	is_vassal_or_similar_subject = yes
	is_excommunicated = no
	religion = catholic
	capital_scope = {
		continent = europe
	}
}

is_possible_subject_of_subject_type_salic_personal_union = {
	NOT = { is_subject_of_type = salic_personal_union }
	is_subject = no
	has_reform = salic_reform
	is_in_war = {
		attacker_leader = PREV
		defender_leader = THIS
		casus_belli = cb_salic_reunification
	}
}

is_possible_subject_of_subject_type_nahuatl_vassal = {
	NOT = { is_subject_of_type = nahuatl_vassal }
	is_subject_of = PREV
	is_vassal_or_similar_subject = yes
	capital_scope = {
		OR = {
			region = california_region
			region = mexico_region
			region = rio_grande_region
			region = central_america_region
		}
	}
}

is_possible_subject_of_subject_type_peasant_vassal = {
	NOT = { is_subject_of_type = peasant_vassal }
	is_subject = no
	primitives = no
	government = republic
	same_continent = PREV
}

can_create_subject_type = {
	can_be_overlord = $subject_type$
	$subject$ = {
		custom_trigger_tooltip = {
			tooltip = IS_POSSIBLE_SUBJECT_OF_SUBJECT_TYPE_$subject_type$
			is_possible_subject_of_subject_type_$subject_type$ = yes
		}
	}
}
